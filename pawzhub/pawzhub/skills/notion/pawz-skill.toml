[skill]
id = "notion"
name = "Notion"
version = "1.0.0"
author = "openpawz"
category = "api"
icon = "edit_note"
description = "Create and manage Notion pages, databases, and blocks"
install_hint = "Create a Notion integration at notion.so/my-integrations → New Integration → copy the Internal Integration Token. Then share your Notion pages/databases with the integration."

[[credentials]]
key = "NOTION_API_KEY"
label = "Notion API Key"
description = "Internal Integration Token from notion.so/my-integrations"
required = true
placeholder = "ntn_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

[instructions]
text = """
You can create and manage Notion pages, databases, and blocks via the Notion API.

## Authentication
All requests use: `Authorization: Bearer {NOTION_API_KEY}`
Include: `Notion-Version: 2022-06-28`
Base URL: `https://api.notion.com/v1`

## Pages
- `POST /pages` — Create a new page (in a database or as a child of another page)
- `GET /pages/{page_id}` — Retrieve a page and its properties
- `PATCH /pages/{page_id}` — Update page properties
- `GET /blocks/{page_id}/children` — Get page content (blocks)
- `PATCH /blocks/{page_id}/children` — Append content blocks to a page

## Databases
- `POST /databases` — Create a database
- `GET /databases/{database_id}` — Retrieve database schema
- `POST /databases/{database_id}/query` — Query database entries with filters and sorts
- `PATCH /databases/{database_id}` — Update database properties

## Search
- `POST /search` — Search across all shared pages and databases
  Body: `{"query": "search term", "filter": {"property": "object", "value": "page"}}`

## Block types
Notion content is composed of blocks: paragraph, heading_1/2/3, bulleted_list_item, numbered_list_item, to_do, toggle, code, quote, callout, image, divider, table, and more.

## Error handling
- 401: Invalid or expired integration token
- 403: Integration doesn't have access — share the page/database with your integration
- 404: Page or database not found — verify ID and sharing permissions
- 400: Invalid block/property format — check the Notion API docs for correct schema
- 409: Conflict — concurrent edit detected, retry

## Best practices
- Always search first to find existing pages before creating duplicates
- Use database queries with filters instead of fetching all entries
- Pages must be shared with the integration to be accessible
- Rich text uses an array of text objects with annotations (bold, italic, etc.)
- Page IDs can be extracted from Notion URLs (remove dashes)
"""
